{% extends 'layout.html' %}
{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">

    <!-- Left Section -->
    <div class="md:col-span-2 bg-gray-800 p-6 rounded-xl shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-3">ðŸ“¤ Upload Student Data</h2>
        <p class="text-gray-300 mb-5">
            Please upload a <b>CSV</b> or <b>Excel</b> file containing the following columns:
            <code class="bg-gray-700 text-green-400 px-1 py-0.5 rounded">Attendance</code>,
            <code class="bg-gray-700 text-green-400 px-1 py-0.5 rounded">Study_Hours</code>, and
            <code class="bg-gray-700 text-green-400 px-1 py-0.5 rounded">Past_Result</code>.
            Optionally, you may include <code class="bg-gray-700 text-yellow-400 px-1 py-0.5 rounded">Student_ID</code>
            for easier identification.
        </p>

        <!-- Upload Form -->
        <form method="POST" enctype="multipart/form-data"
            class="bg-gray-900 p-6 rounded-xl border border-gray-700 shadow-lg space-y-5">

            <!-- File Input -->
            <div>
                <label for="file" class="block text-gray-200 font-semibold mb-2">Select CSV/Excel File</label>
                <input
                    class="w-full p-3 rounded-lg bg-gray-800 text-gray-200 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    type="file" id="file" name="file" accept=".csv,.xlsx,.xls" required>
                <small class="text-gray-400 text-sm">Allowed formats: CSV, XLSX, XLS</small>
            </div>

            <!-- Risk Threshold Input -->
            <div>
                <label for="threshold" class="block text-gray-200 font-semibold mb-2">High-Risk Threshold</label>
                <input
                    class="w-full p-3 rounded-lg bg-gray-800 text-gray-200 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-500"
                    type="number" id="threshold" name="threshold" value="40" step="1" min="0" max="100">
                <small class="text-gray-400 text-sm">
                    Students with predicted scores <b>below</b> this value will be marked as
                    <span class="text-red-400 font-bold">HIGH RISK</span>.
                </small>
            </div>

            <!-- Buttons -->
            <div class="flex flex-wrap gap-4 mt-4">
                <button type="submit"
                    class="bg-green-600 hover:bg-green-700 px-5 py-3 rounded-lg shadow-md text-white text-lg transition duration-200 flex items-center space-x-2">
                    ðŸš€ <span>Upload & Predict</span>
                </button>

                <a href="{{ url_for('index') }}"
                    class="bg-gray-600 hover:bg-gray-700 px-5 py-3 rounded-lg shadow-md text-white text-lg transition duration-200 flex items-center space-x-2">
                    â¬… <span>Back to Home</span>
                </a>

                <a href="{{ url_for('model_report') }}"
                    class="bg-purple-600 hover:bg-purple-700 px-5 py-3 rounded-lg shadow-md text-white text-lg transition duration-200 flex items-center space-x-2">
                    ðŸ“Š <span>View Model Report</span>
                </a>
            </div>
        </form>
    </div>

    <!-- Instructions Card -->
    <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
        <h5 class="text-xl font-semibold text-white mb-4">ðŸ“Œ Instructions</h5>
        <ul class="list-disc list-inside space-y-2 text-gray-300 text-sm">
            <li>Ensure the file has correct column names.</li>
            <li>Download <a href="{{ url_for('download_sample') }}"
                    class="text-blue-400 underline hover:text-blue-300">sample CSV</a> for reference.</li>
            <li>After uploading, you'll see a preview of predicted results.</li>
            <li>Full results can be exported as Excel.</li>
        </ul>
    </div>

</div>
{% endblock %}