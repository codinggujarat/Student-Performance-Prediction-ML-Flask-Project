{% extends 'layout.html' %}
{% block content %}
<div class="flex justify-center items-center min-h-[80vh] px-4">
    <!-- Center Container -->
    <div class="w-full">

        <!-- Heading -->
        <h2 class="text-3xl sm:text-4xl font-bold mb-3 text-white flex items-center gap-2"
            style="font-family: 'Panchang', sans-serif;">
            Prediction Results
        </h2>

        <!-- Description -->
        <p class="text-gray-300 mb-4 text-sm sm:text-base leading-relaxed">
            Below is a preview of the predictions. Students marked in
            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm">HIGH RISK</span>
            are predicted to score below the threshold you set.
        </p>

        <!-- Results Table -->
        <div
            class="rounded-2xl mt-4 bg-white/5 backdrop-blur-xl shadow-2xl border border-white/10 hover:border-purple-500/30 transition duration-300 ease-in-out">
            <div class="p-4 overflow-x-auto">
                <div class="max-h-[500px] overflow-y-auto rounded custom-table">
                    {{ table_html | safe }}
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-wrap justify-start gap-3 mt-6">
            <!-- Download Results -->
            <a href="{{ download_url }}" class="px-5 py-3 rounded-full bg-purple-500/20 text-white font-light shadow-lg text-sm
                       hover:to-indigo-700 
                                           transition duration-300 ease-in-out"
                style="letter-spacing: 2px; font-family: 'General Sans', sans-serif;">
                Download Full Results
            </a>

            <!-- Upload Another File -->
            <a href="{{ url_for('upload') }}" class="px-5 py-3 rounded-full bg-purple-500/20 text-white font-light shadow-lg text-sm
                       hover:to-indigo-700 
                                           transition duration-300 ease-in-out"
                style="letter-spacing: 2px; font-family: 'General Sans', sans-serif;"> Upload Another File
            </a>

            <!-- View Analytics -->
            <a href="{{ url_for('model_report') }}" class="px-5 py-3 rounded-full bg-purple-500/20 text-white font-light shadow-lg text-sm
                       hover:to-indigo-700 
                                           transition duration-300 ease-in-out"
                style="letter-spacing: 2px; font-family: 'General Sans', sans-serif;"> View Charts & Analytics
            </a>

            <!-- Back to Home -->
            <a href="{{ url_for('index') }}" class="px-5 py-3 rounded-full bg-purple-500/20 text-white font-light shadow-lg text-sm
                       hover:to-indigo-700 
                                           transition duration-300 ease-in-out"
                style="letter-spacing: 2px; font-family: 'General Sans', sans-serif;"> Back to Home
            </a>
        </div>
    </div>
</div>

<!-- Glassmorphic Table Styling -->
<style>
    /* Table Wrapper */
    .custom-table table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 15px;
        background: none !important;
        color: #fff;
        border-radius: 16px;
        overflow: hidden;
    }

    /* Table Header */
    .custom-table th {
        background: rgba(255, 255, 255, 0.06);
        color: #fff;
        padding: 14px 12px;
        text-align: center;
        font-weight: 600;
        backdrop-filter: blur(15px);
        position: sticky;
        top: 0;
        z-index: 10;
        border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.1);
    }

    /* Table Data Cells */
    .custom-table td {
        background: rgba(168, 85, 247, 0.08);
        /* Soft purple glass */
        color: #e5e7eb;
        padding: 12px 10px;
        text-align: center;
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        transition: background-color 0.3s ease, transform 0.2s ease;
    }

    /* Hover Row Effect */
    .custom-table tr:hover td {
        background-color: rgba(168, 85, 247, 0.25);
        transform: scale(1.01);
        box-shadow: 0 0 15px rgba(168, 85, 247, 0.35);
    }

    /* Scrollbar Styling */
    .custom-table::-webkit-scrollbar {
        height: 8px;
        width: 8px;
    }

    .custom-table::-webkit-scrollbar-thumb {
        background-color: rgba(168, 85, 247, 0.5);
        border-radius: 10px;
    }

    .custom-table::-webkit-scrollbar-track {
        background: transparent;
    }
</style>
{% endblock %}